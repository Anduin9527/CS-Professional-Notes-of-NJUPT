# 微机接口技术

## 输入输出系统

### 总线

#### 32 位微处理器的外部引脚

理解微处理器的引脚功能是计算机系统中微处理器与存储器和微处理器与 I/O 接口进行连接的重要基础之一

Pentium 微处理器的引脚功能：

1. 数据线及控制信号：

   + $D_{63}\sim D_0$：双向数据线，可以传输 8 个 `Byte` 的数据
   + $\overline{BE_7}\sim \overline{BE_0}$：字节允许信号（存储体选中信号），对应 8 个 `Byte` 64 位数据
   + $DP_7\sim DP_0$：奇偶校验信号，写操作时每个 `Byte` 产生一个校验位，读操作时则按字节校验
   + $\overline{PCHK}$：读校验出错信号
   + $\overline {PEN}$：奇偶校验允许信号，校验出错时，处理器自动进行异常处理

2. 地址线及控制信号

   + $A_{31}\sim A_3$：高 29 位地址线，双向地址线，既能对外选择主存和 I/O 设备，又能对内选择片内 Cache 单元。能寻址 4GB 内存和 64KB 的 I/O 空间
   + $A_2\sim A_0$：低 3 位地址组合成字节允许信号$\overline{BE_7}\sim \overline{BE_0}$，所以，$A_2\sim A_0$不对外。
   + $\overline{ADS}$：地址状态输出信号，表示 CPU 已经启动一个总线周期

3. 总线周期控制信号

   CPU 通过总线与存储器、I/O 交换一个数据所需要的时间称为总线周期，下面三个信号的组合表示该周期内总线完成的操作

   + $M/\overline{IO}$：1 表示 CPU 与存储器交换信息；0 表示 CPU 与 I/O 接口交换信息
   + $D/\overline C$：1 表示传输的是数据；0 表示传输的是指令代码
   + $W/\overline R$：1 表示 CPU 进行写操作；0 表示 CPU 进行读操作

| $\rm M/\overline {IO}$ | $\rm D/\overline {C}$ | $\rm W/\overline R$ | 操作          |
| ---------------------- | --------------------- | ------------------- | ------------- |
| 0                      | 0                     | 0                   | 中断          |
| 0                      | 0                     | 1                   | 中止/专用周期 |
| 0                      | 1                     | 0                   | I/O 读         |
| 0                      | 1                     | 1                   | I/O 写         |
| 1                      | 0                     | 0                   | 微代码读      |
| 1                      | 0                     | 1                   | 保留          |
| 1                      | 1                     | 0                   | 存储器读      |
| 1                      | 1                     | 1                   | 存储器写      |

4. 系统控制信号

   $CLK$ 信号是系统时钟信号，其周期称为时钟周期或 **T 状态**，Pentium 的总线周期包含两个时钟周期

   + $INTR$：可屏蔽中断请求信号
   + $NMI$：非屏蔽中断请求信号

5. 总线仲裁信号

   1. $HOLD$：总线请求信号（输入）
   2. $HLDA$：总线请求响应信号（输出）

#### 总线标准

总线是构成计算机系统的互联机构，是多个系统的功能部件之间，进行数据传送的公共通路。通过总线可以传输数据信息、地址信息和各种控制命令和状态信息

总线类型：

1. 按照总线传输的信息性质划分：数据总线，地址总线和控制总线
2. 按照连接对象和所处系统层次：芯片级总线，系统总线，局部总线和外部总线

总线标准：

1. AT（ISA）总线

   工业标准结构(Industry standard architecture，简称 ISA）是 IBM 的标准兼容总线。其数据宽度 16 位；数据传输率最高 8MB/S；一次可进行 8 位或 16 位数据存取；24 根地址线，可寻址 16MB 存储空间；64K 个可寻址的 I/O 端口；15 级中断控制；7 个 DMA 通道；支持多个主控器

2. EISA 总线

3. VESA 总线

4. PCI 总线

   外围部件互连（Peripheral component interconnect，简称 PCI）是 Intel 公司为奔腾微处理器的开发使用而设计的局部总线。PCI 用 32 位数据传输，也可扩展为 64 位。用 32 位数据宽度时，以 33MHz 的频率运行，传输率可达 132MB/s；用 64 位数据宽度时，以 66MHz 的频率运行，传输率达 528MB/s。高效率，即插即用，兼容各类总线

5. 并行 I/O 标准接口 IDE

   IDE (Integrated Drive Electronics )也称为 ATA（AT Attachable）IDE 即“电子集成驱动器”，它的本意是指把“硬盘控制器”与“盘体”集成在一起的硬盘驱动器。把盘体与控制器集成在一起的做法减少了硬盘接口的电缆数目与长度，数据传输的可靠性得到了增强，硬盘制造起来变得更容易。对用户而言，硬盘安装起来也更为方便。

6. SATA（Serial ATA）

   使用 SATA（Serial ATA）口的硬盘又叫串口硬盘，是 PC 机硬盘的趋势。SATA 采用串行连接方式，嵌入式时钟信号，具备了更强的纠错能力，与以往相比其最大的区别在于能对传输指令（不仅仅是数据）进行检查，如果发现错误会自动矫正，这在很大程度上提高了数据传输的可靠性。串行接口还具有结构简单、支持热插拔的优点。

7. 通用串行总线 USB

   USB 用一个 4 针插头作为标准插头，采用菊花链形式可以把所有的外设连接起来，最多可以连接 127 个外部设备，并且不会损失带宽。USB 需要主机硬件、操作系统和外设三个方面的支持才能工作。目前的主板一般都采用支持 USB 功能的控制芯片组，USB 支持热插拔，连接灵活，独立供电等优点，可以连接鼠标、键盘、打印机、扫描仪、摄像头、闪存盘等，几乎所有的外部设备。

### 输入输出系统概述

#### 输入输出接口

接口电路的作用：由于输入输出设别的多样性和接口电路的复杂性，CPU 必须通过接口电路与外设进行信息交换。所以称接口是 CPU 与外部设备交换信息的中转站

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20221120152004.png" alt="image-20221120151957038" style="zoom:80%;" />

接口电路的功能：

1. 数据缓冲功能：一般设置有数据缓冲器（输入）或锁存器（输出），以实现系统内外信号隔离和信号稳定
2. 寻址功能：应有 I/O 端口地址译码器，以便使用输入输出的指令来读写数据
3. 联络功能：在 CPU 和外设之间传递对方的状态
4. 中断管理功能：为了便于 CPU 和端口寄存器交换信息。应有中断控制电路，允许或禁止接口电路提出中断请求
5. 数据转换功能：计算机内部是并行处理数据，但有些外设只支持串行处理数据。所以应具有“串转并”和“并转串”

#### 端口

**端口** 是接口电路中，能与 CPU 交换信息(使用 `IN` 和 `OUT`) 的 **寄存器**，即输入输出端口寄存器，简称为端口。每个端口，系统都为其提供一个地址，系统只要给出某个地址，通过译码电路，就能找到响应的 I/O 接口电路中的端口寄存器。

端口的分类：

+ 数据口：存放 CPU 向外设输出或外设输入的数据（注意，接口电路 **必须具有数据口**）
+ 控制口：存放控制信息（控制接口电路、外设的工作）
+ 状态口：存放状态信息（反映外设的状态）

端口的编制方式：

1. **存储器映像方式**：把端口和存储单元等同看待，统一编址
   + 凡访问存储单元的指令都可访问 I/O 端口
   + 端口地址占用 **存储空间**
2. **端口独立编址方式**：I/O 端口和存储器分别使用两个地址空间, 单独编址
   + I/O 端口不占用存储空间
   + CPU 要有专用的 I/O 指令

PC 系列机的端口变址采用 **端口独立编址** 的方式，设计用 $A_{15}\sim A_0$ 低 16 位地址寻址 I/O 端口。通过总线周期控制信号 $M/\overline{IO}$ 切换访问 I/O 端口和存储器。但基于微处理器的 PC 系列机，实际使用 $A_9\sim A_0$ 作为 I/O 地址，所以实际端口地址最多为 $2^{10} = 1024$，其中系统本身占用一部分。此外，**输入输出空间无分段概念**

#### 常用的 I/O 指令

上文提到，采用独立编址方式时需要有专门的指令用以访问

当端口地址为 **1 字节**，可以采用直接寻址的方式，寻址最多 $2^8 = 256$ 个端口：

1. `IN`

   格式：`IN AL/AX/EAX,PORT`

   功能：将端口地址为 `PORT` 的内容输入到寄存器中，因为 `IN` 每次只能传递一个字节。所以寄存器的大小会改变其表现形式：

   + `AX`：将 `[PORT]` 传递给 `AL`，将 `[PORT+1]` 传递给 `AH`
   + `EAX`：将 `[PORT]~[PORT+3]` 的内容从低到高依次传递

2. `OUT`

   格式：`OUT PORT,AL/AX/EAX`

   功能：将对应寄存器内容输出到某个端口地址，与 `IN` 相同，传递信息的大小根据寄存器的大小而改变。同样也是 **底对低高对高** 地传递

当端口地址为 **2 字节**，可以用间接寻址方式，寻址最多 $2^{16}$ 个端口，注意端口地址必须放在寄存器 `DX` 中，且 `DX` **无方括号**。传递信息的大小同样根据寄存器的大小而改变。同样也是 **底对低高对高** 地传递

1. `IN`

   格式：`IN AL/AX/EAX,DX`

   功能：将 `[DX]` 的端口内容传递给对应寄存器

2. `OUT`

   格式：`OUT DX,AL/AX/EAX`

   功能：将寄存器中的内容输出到 `[DX]` 的端口寄存器

### 交换信息的四种方式

#### 无条件传送方式

##### 输入接口

执行 `IN` 指令之前，要求外设数据已经准备好

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20221120192023.png" alt="image-20221120192023895" style="zoom:80%;" />

+ 三态门即三态缓冲器，其拥有三个输出：0，1 以及高阻
+ 当 CPU 未执行输入指令时，$\overline {IOR}$为 0，此时三态缓冲器成高阻状态。以实现内部和外部数据总线隔离，反之数据则通过三态缓冲器到达数据总线

##### 输出接口

执行 `OUT` 指令之前, 须保证输出设备空闲。

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20221120192415.png" alt="image-20221120192415514" style="zoom:80%;" />

在无条件输出时，由于外设的速度较慢。所以输出端用锁存器（8 个 D 触发器）和 CPU 的数据总线相连。注意：必须保证锁存器中是空闲的。执行 `OUT` 指令时：

+ `AL\AX\EAX` 的内容$\to$数据线
+ 端口地址$\to$地址线
+ $\overline{LOW}= 0$有效，CPU 输出的数据经过数据总线送入输出锁存器，$\overline{LOW}$有效状态结束后，输出锁存器一直保持这个数据直到被外设取走。如果上一次的数据未及时取走，则新输入的数据改变上一次的数据就会造成数据丢失

#### 查询方式

用查询方式交换信息，必先了解外设的状态，也就是必须得有状态口

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20221120194454.png" alt="image-20221120194454708" style="zoom:80%;" />

其用汇编表示的核心程序如下：

```asm
;状态口地址=200H
;数据口地址=201H
;输入程序
RSCAN: 
MOV    DX, 200H
IN     AL, DX
TEST   AL, 80H;状态口D_7为1,表示输入数据已经准备好
JZ     RSCAN
MOV    DX, 201H
IN     AL, DX
```

```asm
;状态口地址=200H=数据口地址
;输出程序
TSCAN:  
MOV    DX,200H
IN     AL,DX
TEST   AL,1;状态口D_0为0,表示空闲
JNZ    TSCAN
MOV    DX,200H
MOV    AL,Number
OUT    DX,AL
```

在查询方式中，显然 CPU 一直在查询，效率低下。且在有多个外设的系统中，多个外设要求 CPU 为它服务是 **随机的**，就不能保证系统实时地对外设的请求作出响应。

#### 中断控制方式

在外设没有作好数据传送准备时，CPU 可执行与传送数据无关的其它指令。当外设作好传送准备后，**主动** 向 CPU 请求中断。若 CPU 响应这一请求，则暂停正在运行的程序，转入中断服务程序，完成数据传送。待服务完毕后，自动返回原来运行的程序

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20221120201152.png" alt="image-20221120201152833" style="zoom:67%;" />

+ 被中断的原程序称为主程序
+ 中断处理程序称为中断服务子程序
+ 主程序被中止的地方，称为断点，也就是下一条指令所在内存的地址

#### DMA 方式

DMA (Direct Memory Access) : 直接存储器存取，习惯上称 DMA 传送。利用硬件完成高速外设与系统 RAM 之间的信息交换。DMAC 是实现 DMA 传送的核心芯片

+ DMA 读传送: 在 DMAC 控制下，读取 RAM 的内容传送到 I/O 端口
+ DMA 写传送: 在 DMAC 控制下，I/O 端口信息传送到系统 RAM 某单元
+ 存储单元读/写传送： 在 DMAC 控制下，实现系统 RAM 之间的传送

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20221120201839.png" alt="image-20221120201839529" style="zoom:80%;" />

+ 系统的三总线分别受到 CPU 和 DMAC 的控制。但同一时间, 三总线只能受一个器件的控制。所以, 两者之间必须有联络信号

##### DMA 传送过程

1. 高速外设通过其接口电路向 DMAC 发出“DMA 请求”信号 (请求 DMAC 为其传送数据)

2. DMAC 检测到有 DMA 请求之后, 即向 CPU 提出“总线保持请求”`HOLD` 信号 (请求 CPU 脱离总线)

3. CPU 执行完当前指令的当前总线周期之后脱离系统总线，并向 DMAC 发出“总线响应”HLDA 信号

4. DMAC 收到“总线响应”信号之后，**接管系统总线的控制权**，并向 I/O 接口发出“DMA 响应”信号

5. 在这之后，由 DAMC 控制系统总线，进行 DMA 传送

   1. 若进行 DMA 读传送：

      DMAC 把 RAM 地址 $\to$ 地址总线上

      DMAC 发出存储器读命令和 I/O 写命令

   2. 若进行 DMA 写传送：

      DMAC 把 RAM 地址 $\to$ 地址总线上

      DMAC 发出 I/O 读命令和存储器写命令

6. 预定的字节数全部传送完毕，DMAC 脱离系统总线，CPU 再次控制系统总线，完成被中断指令的后继总线周期

##### DMA 传送与中断方式的比较

1. 响应时间：CPU 接到“中断请求”后要等到 **当前指令执行完毕** 才响应，而 CPU 接到 DMAC 的“总线请求”后，只要 **当前指令的当前总线周期执行完毕** 就响应
2. 传输速度：DMAC 传送比中断传送要快

3. 中断传送是由 **软件** 完成的，执行一次中断服务程序，就完成一字节的 I/O 传送。 而 DMA 传送是由 **硬件** 完成的，每传送一个字节只占用 CPU 的一个总线周期。
4. 中断请求分为 **内部中断和外部中断**。DMA 请求的方式分为 **硬件 DMA 请求和软件 DMA 请求**

**8237A DMA 控制器**：在 PC 机中使用两片这玩意，一片 8237 有 4 个 DMA 通道。8237 提供 4 种 DMA 传送方式：单字节读/写传送；数据块读/写传送；请求传送；级连传送。一次 DMA 传送的最大字节数是 **64KB**。8237 每个通道只能访问 64K RAM，PC 系列机由于增加了“页面寄存器”，所以一个通道能访问 16M 内存

#### 传送方式比较

|    传送方式    |                           **优点**                           | **缺点**                                         |
| :------------: | :----------------------------------------------------------: | ------------------------------------------------ |
| 无条件传送方式 |   可以直接使用输入缓冲器或锁存器与数据线相连，程序设计简单   | 传送不能太频繁（保证每次传送设备都处在就绪状态） |
|    查询方式    |                     比无条件传送方式可靠                     | 降低了 CPU 的工作效率，不具有实时性                |
|  中断控制方式  | 提高了 CPU 的工作效率，具备实时性，可并行工作，不用反复查询外设的工作状态。 | 每次进行数据传输，都要保存现场                   |
|    DMA 方式     |           按数据块传输，不经过 CPU，不需要保护现场            | 硬件更复杂（DMA 控制器）                          |

## 中断系统

### 中断的基本概念

CPU 在执行程序的过程中，由于某种外部或内部事件的作用，使 CPU 停止当前正在执行的程序而转去为该事件服务，待事件服务结束后，又能自动返回到被中止了的程序中继续执行的过程。称之为 **中断**

+ **主程序**：被中断的原程序

+ **中断服务子程序**：中断处理程序

+ **断点**：主程序被中止的地方，也就是下一条指令所在内存的地址

+ **中断源**：能够引发 CPU 中断的信息源，有外部中断源（硬件）和内部中断源（软件）

  + 外部中断源：I/O 设备，数据通道，时钟，故障源
  + 内部中断源：`INT` 软件中断指令，CPU 指令产生的异常

+ **中断分类**：根据中断源的不同，中断分为 **外部中断** 和 **内部中断**

  + 外部中断：由 CPU 以外的设备发出，并由 CPU 的中断请求信号引脚输入所引发的中断称为外部中断，也称为
    **硬件中断**

    > 80X86 CPU 有 2 个引脚（`INTR` 和 `NMI`)可以接收外部的中断请求信号
    > 由输入到 `INTR` 引脚的中断请求信号引发的中断称为 **可屏蔽硬件中断**
    > 由输入到 `NMI` 引脚的中断请求信号引发的中断称为 **非屏蔽硬件中断**

  + 内部中断：由 CPU 内部事件，即由 CPU 硬件故障或程序执行中的事件所引发的中断称为内部中断。内部中断可以进一步分为 **软件中断** 和 **异常**

    > 执行有定义的 `INT` 指令而引发的中断，称为 **软件中断**。软件中断可分为 **BIOS 中断**、**DOS 中断**
    >
    > 常见异常有：
    >
    >+ **除法错中断**：当除法结果溢出或者除数为 0 时，发生的中断
    >+ 单步或 **陷阱中断**：执行每条指令后，如果标志寄存器的 `T` 标志（陷阱标志）为 1 时，则产生中断。

+ **中断系统**：为实现中断而采取的 **硬件和软件的集合**

#### 中断向量

**中断类型码**：为了区别各种不同的中断，微机系统给每一个中断分配了一个中断号 $n$，即中断类型码，其取值范围是 $0\sim 255$。其中前 $32$ 个为 intel 保留的系统中断码。下面给出常见中断

|   中断类型码   |  对应中断内容  |
| :------------: | :------------: |
|    0 型中断     |   除法错中断   |
|    1 型中断     | 单步或陷阱中断 |
|    2 型中断     | 非屏蔽硬件中断 |
|    3 型中断     |    断点中断    |
|    4 型中断     |    溢出中断    |
|    5 型中断     |    屏幕打印    |
| 08H ∼ 0FH 型中断 | 可屏蔽硬件中断 |
| 10H ∼ 1FH 型中断 |    BIOS 中断    |
| 20H ∼ 3FH 型中断 |    DOS 中断     |

**中断向量**：实模式下，**中断服务子程序** 的入口地址。在整个中断程序的执行过程中，中断向量起 **引导作用**。它由两部分组成:

1. 服务程序所在代码段的 **段基址**（2 个字节）

2. 服务程序入口的 **偏移地址**（2 个字节）

**中断向量表**：中断类型码通过一个地址指针表与中断服务程序入口地址相联系。

+ 实模式下：该表称为 **中断向量表**
+ 保护模式下：该表称为 **中断描述符表**

**中断向量表的设置**：在实模式下，中断向量表需设置在系统的 RAM 最低端的 **1K** 单元，即 $00000H\sim 003FFH$

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20221121195850.png" alt="image-20221121195850164" style="zoom:67%;" />

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20221121195944.png" alt="image-20221121195944630" style="zoom:67%;" />

+ 对于$n$型中断，其中断向量存放在系统 RAM 的$4\times n\sim 4\times n+3$这四个单元。其中前 **两个单元存放偏移地址，后两个单元存放段基址**

**中断向量表的初始化**：

+ 由 BIOS 设计的中断服务程序（如 INT 16H, INT 10H...）其中断向量在 **加电时由 BIOS 负责写入** 中断向量表
+ 由 DOS 设计的中断服务程序（如 INT21H）其中断向量是在 **启动 DOS 时由 DOS 负责写入** 中断向量表
+ 用户程序开发的中断服务程序，由用户程序写入其中断向量。其有两种方法写入

1. 用户自己编写程序填写中断向量表

   ```asm
   ;用户自己编写程序填写中断向量表
   CLI											;关中断指令
   PUSH	DS								;存储DS
   MOV		AX, 0000H
   MOV		DS, AX						;设置数据段为0（最低1K）
   MOV		BX, 4*n						;n型中断
   MOV		AX, OFFSET SERVICE;SERVICE是中断服务子程序的名称，通过OFFSET获取其偏移地址
   MOV		[BX], AX					;将偏移地址送到4n~4n+1
   MOV		AX, SEG SERVICE		;通过SEG获取其段基址
   MOV		[BX+2], AX				;将段基址送到4n+2~4n+3
   POP 	DS								;恢复DS
   STI											;开中断指令
   ```

2. 利用 DOS 设计好的两个子程序，专门用于中断向量的读写

   DOS `35H` 子功能

   功能：读出 $n$ 型中断向量

   入口参数：`AL` $=$ 中断类型码

   出口参数：`ES:BX` $=n$ 型中断向量

   

   DOS `25H` 子功能

   功能：写入 $n$ 型中断向量

   入口参数：

   + `DS`$=$中断服务程序所在代码段的 **段基址**
   + `DX`$=$中断服务程序入口的 **偏移地址**
   + `AL`$=$中断类型码

   出口参数：无 

   ```asm
   ;利用DOS功能实现填写中断向量表
   CLI											;关中断指令
   PUSH	DS								;存储DS
   PUSHA										;压入所有字通用寄存器
   MOV   AX,SEG SERVICE		;取出段基址
   MOV   DS,AX							;设置入口参数，赋给数据段
   MOV   DX,OFFSET SERVICE	;设置入口参数，取出偏移地址
   MOV   AH,25H						;调用25H写入
   MOV   AL,n							;设置入口参数，中断类型码
   INT   21H
   POPA										;恢复通用寄存器
   POP DS									;恢复DS
   STI											;开中断
   ```

#### 中断响应及处理

对于 **非屏蔽硬件中断请求**，CPU 内部会自动产生中断类型码 2；对于 **可屏蔽硬件中断请求**，当 CPU 处于 **开中断状态** 时，由 **外部中断控制器** 将相应的中断类型码送给 CPU；对于异常，中断类型码也是自动形成的；对于 `INT` 指令，中断类型码即为指令中给定的 $n$

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20221121214108.png" alt="image-20221121214108064" style="zoom: 50%;" />

CPU 获得了中断类型码 $n$ 之后，中断的处理过程如下：

1. 将 `F` 标志寄存器入栈，保存状态；将 `F` 中的 `T` 标志置 0（屏蔽新的可屏蔽硬件中断和单步中断）和 `I` 标志置 0（处于关中断状态）
2. 将断点的地址压入堆栈，先压入 `CS` 断点基地址，后压入 `IP` 断点偏移地址
3. CPU 自动根据 $n$ 的值，从对应 **中断向量表** 位置取出 $n$ 型服务程序入口地址并送入 `CS:IP` 从而转入 **中断服务程序**

4. 服务程序执行完毕后，执行 **中断返回指令**。中断返回指令的功能是按顺序恢复断点处的 `IP`、`CS` 和之前保护的相应中断前的标志寄存器 `F` 的内容。CPU 根据恢复后的 `CS:IP` 返回断点，继续执行 **主程序**

大致可以概括为：保护现场，中断处理，恢复现场，中断返回

### 多级中断管理

**中断优先级**：当有多个中断源在同一时刻提出请求时 CPU 对中断响应的次序称中断优先级。中断响应的次序是用 **排队器硬件** 实现的中断优先级如下图所示。为了根据需要，可以由程序控制改变实际的中断处理次序。

|   中断类型    | 优先级 |
| :-----------: | :----: |
|  除法错中断   |  最高  |
| 软件中断 INT n |        |
|   断点中断    |        |
| 溢出中断 INTO  |        |
|    NMI 中断    |        |
|   INTR 中断    |        |
|   单步中断    |  最低  |

**禁止中断**：产生中断请求后，CPU 不能中断现行程序的执行

**中断屏蔽**：用程序有选择地封锁部分中断，而允许其余部分仍可得到响应

**中断嵌套**：在执行中断服务程序时，仍可再响应新的中断申请

#### 中断系统应具备的基本功能

1. 对于硬件中断，接口电路应具备 **屏蔽** 和 **开放** 的功能，这种功能由程序员通过软件去控制
2. 能实现 **中断判优**（中断排队），当有多个中断源提出请求时，应能优先响应高级别的中断源
3. 能够实现中断嵌套
4. 响应中断后，能自动转入中断处理，处理完毕能自动返回断点
